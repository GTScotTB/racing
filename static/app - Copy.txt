// Fetch and display dashboard data
document.addEventListener("DOMContentLoaded", () => {
    fetchTotalEntries();
    fetchClassEntries();
    fetchMissingInspections();
    fetchNotApproved();
    fetchFailedItems();
  });
  
  // Fetch total entries with vehicle_type W
  function fetchTotalEntries() {
    fetch('/total_entries')
      .then(response => response.json())
      .then(data => {
        document.getElementById('totalEntries').innerText = data.total_entries;
      })
      .catch(err => console.error('Error fetching total entries:', err));
  }
  
  // Fetch entries per class
  function fetchClassEntries() {
    fetch('/class_entries')
      .then(response => response.json())
      .then(data => {
        const list = document.getElementById('classEntries');
        list.innerHTML = ''; // Clear existing list
        data.class_entries.forEach(entry => {
          const li = document.createElement('li');
          li.innerText = `${Object.keys(entry)[0]}: ${Object.values(entry)[0]} entries`;
          list.appendChild(li);
        });
      })
      .catch(err => console.error('Error fetching class entries:', err));
  }
  
  // Fetch total entries without inspection reports
  function fetchMissingInspections() {
    fetch('/missing_inspections')
      .then(response => response.json())
      .then(data => {
        document.getElementById('missingReports').innerText = data.missing_inspections.length;
      })
      .catch(err => console.error('Error fetching missing inspections:', err));
  }
  
  // Fetch total entries not approved to start
  function fetchNotApproved() {
    fetch('/not_approved_to_start')
      .then(response => response.json())
      .then(data => {
        document.getElementById('notApproved').innerText = data.not_approved_to_start_count;
      })
      .catch(err => console.error('Error fetching not approved entries:', err));
  }
  
  // Fetch total failed items
  function fetchFailedItems() {
    fetch('/failed_items')
      .then(response => response.json())
      .then(data => {
        document.getElementById('failedItems').innerText = data.failed_items_count;
      })
      .catch(err => console.error('Error fetching failed items:', err));
  }
  
  // Action Functions (Add more detail as you implement)
  function addEntry() {
    alert("Redirect to Add Entry Form");
  }
  
  function lookupEntry() {
    alert("Redirect to Lookup Entry Page");
  }
  
  function viewOutstandingItems() {
    alert("Redirect to View Outstanding Items");
  }
  
  function viewVehiclesWithoutInspections() {
    alert("Redirect to Vehicles Without Inspections");
  }
  
  function viewNotApprovedVehicles() {
    alert("Redirect to Not Approved Vehicles");
  }
  
  function viewGarageNumbers() {
    alert("Redirect to View Garage Numbers");
  }
  
  function viewVehicleWeights() {
    alert("Redirect to View Vehicle Weights");
  }